# Katomo 営業支援ツール - 開発状況

## 現在の進捗状況

### ✅ 完了した項目

#### 1. プロジェクト設計
- [x] 基本設計書の作成
- [x] データベース設計の完了
- [x] プロジェクト構成の定義
- [x] 技術スタックの選定

#### 2. 環境構築
- [x] Docker環境の構築 (PostgreSQL, Redis, MinIO)
- [x] docker-compose.yml の作成
- [x] データベーススキーマの作成
- [x] シードデータの準備

#### 3. バックエンド (NestJS)
- [x] プロジェクト初期構造の作成
- [x] TypeScript設定
- [x] データベース接続設定 (TypeORM)
- [x] エンティティの定義
  - User
  - Customer
  - Deal
  - Contact
  - Quote
- [x] 認証モジュール (JWT, Passport)
  - LocalStrategy
  - JwtStrategy
  - AuthService
  - AuthController
- [x] ユーザーモジュール
  - UsersService (CRUD操作)
  - UsersController
- [x] 顧客モジュール
  - CustomersService (CRUD + 検索)
  - CustomersController
  - DTO (Create, Update)
- [x] 商談モジュール
  - DealsService (CRUD + カンバンボード用API)
  - DealsController
  - DTO (Create, Update)

#### 4. フロントエンド (Next.js)
- [x] プロジェクト初期構造の作成
- [x] TypeScript設定
- [x] Tailwind CSS設定
- [x] React Query設定 (Providers)
- [x] APIクライアントの作成
- [x] 型定義 (TypeScript types)
- [x] グローバルスタイルの設定

### 🚧 次のステップ

#### Phase 1: MVP機能の実装

##### フロントエンド
1. **認証画面の実装**
   - [ ] ログインページ
   - [ ] 認証状態管理 (Zustand)
   - [ ] Protected Route

2. **ダッシュボード**
   - [ ] レイアウトコンポーネント
   - [ ] サイドバーナビゲーション
   - [ ] ヘッダー
   - [ ] 基本的な統計表示

3. **顧客管理**
   - [ ] 顧客一覧ページ
   - [ ] 顧客詳細ページ
   - [ ] 顧客作成フォーム
   - [ ] 顧客編集フォーム
   - [ ] 検索機能

4. **カンバンボード**
   - [ ] カンバンレイアウト
   - [ ] ドラッグ&ドロップ機能 (@dnd-kit)
   - [ ] 商談カード表示
   - [ ] ステージ間移動
   - [ ] 商談詳細モーダル

5. **UI コンポーネント (shadcn/ui)**
   - [ ] Button
   - [ ] Input
   - [ ] Card
   - [ ] Dialog
   - [ ] Table
   - [ ] Form

##### バックエンド
6. **追加モジュール**
   - [ ] Contacts モジュール
   - [ ] Quotes モジュール
   - [ ] Notes モジュール

7. **認証・認可**
   - [ ] JwtAuthGuard の実装
   - [ ] Roles Guard (権限管理)
   - [ ] ユーザー登録のバリデーション強化

8. **ファイルアップロード**
   - [ ] MinIO連携
   - [ ] ファイルアップロードエンドポイント
   - [ ] 画像処理

#### Phase 2: コア機能の追加

9. **OCRスキャン機能**
   - [ ] 画像アップロード機能
   - [ ] OCR処理 (Tesseract or Google Cloud Vision)
   - [ ] OCR結果の編集機能
   - [ ] 顧客情報への自動入力

10. **見積もり管理**
    - [ ] Excelファイルアップロード
    - [ ] 見積もり情報のパース
    - [ ] 見積もり一覧・詳細
    - [ ] PDF生成機能

11. **連絡履歴管理**
    - [ ] 連絡履歴の記録
    - [ ] 音声ファイルアップロード
    - [ ] タイムライン表示

12. **リッチテキストエディタ**
    - [ ] Tiptap統合
    - [ ] ノート機能
    - [ ] タグ付け機能

#### Phase 3: AI・自動化機能

13. **AIメール生成**
    - [ ] OpenAI API統合
    - [ ] 過去の商談履歴を基にした文面生成
    - [ ] メール送信機能 (SendGrid/Resend)

14. **リマインダー機能**
    - [ ] 自動リマインダー設定
    - [ ] 通知機能
    - [ ] 次回連絡予定の管理

15. **音声文字起こし**
    - [ ] 音声ファイルのアップロード
    - [ ] 自動文字起こし (Whisper API)
    - [ ] テキスト化されたメモの保存

#### Phase 4: 高度な機能

16. **営業目標管理**
    - [ ] 目標設定機能
    - [ ] 達成率の計算
    - [ ] グラフ表示 (Recharts)

17. **契約・原価管理**
    - [ ] Contracts モジュール
    - [ ] 利益率計算
    - [ ] バックオーダー管理

18. **分析・レポート**
    - [ ] 売上分析
    - [ ] 営業効率分析
    - [ ] レポート出力

## ファイル構造

```
katomo営業支援ツール/
├── README.md
├── 基本設計書.md
├── データベース設計.md
├── プロジェクト構成.md
├── SETUP.md
├── 開発状況.md (このファイル)
├── .gitignore
├── docker-compose.yml
│
├── database/
│   ├── schema.sql
│   ├── init.sql
│   └── seeds.sql
│
├── backend/ (NestJS)
│   ├── src/
│   │   ├── main.ts
│   │   ├── app.module.ts
│   │   ├── database/entities/
│   │   └── modules/
│   │       ├── auth/
│   │       ├── users/
│   │       ├── customers/
│   │       └── deals/
│   ├── package.json
│   ├── tsconfig.json
│   └── .env.example
│
└── frontend/ (Next.js)
    ├── src/
    │   ├── app/
    │   ├── components/
    │   ├── lib/
    │   ├── types/
    │   └── stores/
    ├── package.json
    ├── tsconfig.json
    └── .env.example
```

## 開発開始方法

1. **環境構築**
```bash
# Dockerコンテナ起動
docker-compose up -d

# データベース初期化
docker exec -i katomo_postgres psql -U katomo -d katomo_db < database/schema.sql
docker exec -i katomo_postgres psql -U katomo -d katomo_db < database/seeds.sql
```

2. **バックエンド起動**
```bash
cd backend
npm install
cp .env.example .env
npm run start:dev
```

3. **フロントエンド起動**
```bash
cd frontend
npm install
cp .env.example .env.local
npm run dev
```

## 技術スタック

### バックエンド
- NestJS 10
- TypeScript
- TypeORM
- PostgreSQL 15
- Redis 7
- Passport + JWT

### フロントエンド
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- React Query (@tanstack/react-query)
- Zustand (状態管理)
- @dnd-kit (カンバン機能)

### インフラ
- Docker & Docker Compose
- PostgreSQL
- Redis
- MinIO (S3互換ストレージ)

## 次回の作業予定

1. ログイン画面の実装
2. ダッシュボードレイアウトの作成
3. 顧客一覧ページの実装
4. カンバンボードの基本構造作成

---

最終更新: 2025-11-30
